{
  "tasks": [
    {
      "id": "IMPL-001",
      "title": "Set up Unity project structure and .gitignore",
      "description": "Initialize the project structure with proper .gitignore for Unity files and create base documentation",
      "implements": [
        "REQ-F001"
      ],
      "component": "Project Setup",
      "priority": "high",
      "status": "completed",
      "progress": 100,
      "dependencies": [],
      "deliverables": [
        ".gitignore file",
        "README.md",
        "ARCHITECTURE.md",
        "PROJECT_STATUS.md",
        "package.json"
      ]
    },
    {
      "id": "IMPL-002",
      "title": "Create Unity project with Unity 6 or 2022 LTS",
      "description": "Initialize Unity project using Unity Hub or CLI with 3D Core template",
      "implements": [
        "REQ-F001"
      ],
      "component": "Unity Project",
      "priority": "high",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-001"
      ],
      "deliverables": [
        "Unity project files",
        "Assets/ directory",
        "ProjectSettings/ directory",
        "Packages/manifest.json"
      ]
    },
    {
      "id": "IMPL-003",
      "title": "Install Cesium for Unity plugin",
      "description": "Add Cesium for Unity package via Package Manager or git URL",
      "implements": [
        "REQ-F002"
      ],
      "component": "Cesium Integration",
      "priority": "high",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-002"
      ],
      "deliverables": [
        "Cesium package in Packages/manifest.json",
        "Cesium menu in Unity Editor"
      ]
    },
    {
      "id": "IMPL-004",
      "title": "Configure Cesium ion access token",
      "description": "Create Cesium ion account and configure access token in Unity",
      "implements": [
        "REQ-F002"
      ],
      "component": "Cesium Integration",
      "priority": "high",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-003"
      ],
      "deliverables": [
        "Cesium ion token configured",
        "Access to Cesium World Terrain"
      ]
    },
    {
      "id": "IMPL-005",
      "title": "Create main scene with Cesium World Terrain",
      "description": "Set up MainScene.unity with CesiumGeoreference and CesiumWorldTerrain components",
      "implements": [
        "REQ-F003"
      ],
      "component": "Scene Setup",
      "priority": "high",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-004"
      ],
      "deliverables": [
        "Assets/Scenes/MainScene.unity",
        "Working terrain streaming"
      ]
    },
    {
      "id": "IMPL-006",
      "title": "Implement aircraft controller script",
      "description": "Create AircraftController.cs with physics-based movement (pitch, roll, yaw, throttle)",
      "implements": [
        "REQ-F005"
      ],
      "component": "Aircraft System",
      "priority": "high",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-005"
      ],
      "deliverables": [
        "Assets/Scripts/Aircraft/AircraftController.cs",
        "Aircraft prefab with Rigidbody"
      ]
    },
    {
      "id": "IMPL-007",
      "title": "Set up Unity Input System",
      "description": "Install Unity Input System package and create input action maps for flight controls",
      "implements": [
        "REQ-F006"
      ],
      "component": "Input System",
      "priority": "high",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-002"
      ],
      "deliverables": [
        "Input System package installed",
        "FlightControls.inputactions asset",
        "Keyboard/gamepad bindings"
      ]
    },
    {
      "id": "IMPL-008",
      "title": "Add camera rig with smooth follow",
      "description": "Create CameraRig.cs with smooth following, banking effects, and configurable lag",
      "implements": [
        "REQ-F007"
      ],
      "component": "Camera System",
      "priority": "high",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-006"
      ],
      "deliverables": [
        "Assets/Scripts/Camera/CameraRig.cs",
        "Camera prefab with follow script"
      ]
    },
    {
      "id": "IMPL-009",
      "title": "Load sample 3D tileset for buildings",
      "description": "Add Cesium3DTileset component to scene and configure it to stream OSM Buildings or Google 3D Tiles",
      "implements": [
        "REQ-F004"
      ],
      "component": "3D Tiles Streaming",
      "priority": "medium",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-005"
      ],
      "deliverables": [
        "Cesium3DTileset in scene",
        "Visible 3D buildings",
        "Performance validation"
      ]
    },
    {
      "id": "IMPL-010",
      "title": "Create basic HUD canvas",
      "description": "Implement FlightHUD.cs with UI elements for speed, altitude, and heading display",
      "implements": [
        "REQ-F008"
      ],
      "component": "UI System",
      "priority": "medium",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-006"
      ],
      "deliverables": [
        "Assets/Scripts/UI/FlightHUD.cs",
        "HUD Canvas prefab",
        "Speed, altitude, heading indicators"
      ]
    },
    {
      "id": "IMPL-011",
      "title": "Add realistic aerodynamics with lift and drag",
      "description": "Implement lift coefficient based on airspeed and angle of attack, add form drag and induced drag, implement wing area and air density calculations for realistic flight physics",
      "implements": [
        "REQ-F005"
      ],
      "component": "Aircraft System",
      "priority": "high",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-006"
      ],
      "deliverables": [
        "Enhanced AircraftController.cs with aerodynamics",
        "Configurable wing area and lift coefficient",
        "Drag calculation system"
      ]
    },
    {
      "id": "IMPL-012",
      "title": "Implement stall mechanics and angle of attack",
      "description": "Add stall conditions when airspeed is too low or angle of attack is too high, implement stall recovery mechanics, add visual and audio feedback for stall warning",
      "implements": [
        "REQ-F005"
      ],
      "component": "Aircraft System",
      "priority": "high",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-011"
      ],
      "deliverables": [
        "Stall detection system",
        "Angle of attack calculation",
        "Stall warning HUD indicator"
      ]
    },
    {
      "id": "IMPL-013",
      "title": "Add flight assist modes",
      "description": "Implement altitude hold, heading hold, and level flight assist modes that can be toggled on/off to help stabilize the aircraft",
      "implements": [
        "REQ-F005"
      ],
      "component": "Aircraft System",
      "priority": "medium",
      "status": "pending",
      "progress": 0,
      "dependencies": [
        "IMPL-011"
      ],
      "deliverables": [
        "FlightAssist.cs component",
        "Altitude hold autopilot",
        "Heading hold autopilot",
        "Level flight stabilization",
        "HUD indicators for active assists"
      ]
    },
    {
      "id": "IMPL-014",
      "title": "Enhance HUD with additional flight instruments",
      "description": "Add attitude indicator, vertical speed indicator, angle of attack indicator, and G-force meter to the HUD",
      "implements": [
        "REQ-F008"
      ],
      "component": "UI System",
      "priority": "medium",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-010",
        "IMPL-011"
      ],
      "deliverables": [
        "Enhanced FlightHUD.cs",
        "Attitude indicator UI",
        "Vertical speed indicator",
        "AOA indicator",
        "G-force meter"
      ]
    },
    {
      "id": "IMPL-015",
      "title": "Create realistic sprite-based gauge visuals",
      "description": "Replace current minimal gauge design with realistic sprite-based instruments using AI-generated or sourced gauge textures. Implement rotating needle pointers, layered gauge faces (bezel, face, needle, glass), and classical aviation instrument styling for speed, altitude, throttle, and heading gauges.",
      "implements": [
        "REQ-F008"
      ],
      "component": "UI System",
      "priority": "medium",
      "status": "pending",
      "progress": 0,
      "dependencies": [
        "IMPL-014"
      ],
      "deliverables": [
        "AI-generated gauge face sprites (speed, altitude, throttle, heading)",
        "Needle/pointer sprites for each gauge",
        "Bezel and glass overlay sprites",
        "Enhanced CircularGauge.cs with needle rotation support",
        "Documentation: AI prompts for gauge generation (Leonardo.ai/Stable Diffusion)",
        "Documentation: Sprite import settings and setup guide",
        "Integration with existing FlightHUD component"
      ]
    },
    {
      "id": "IMPL-016",
      "title": "Implement 3D tileset selection and overlay system",
      "description": "Create a system to allow selection and loading of various 3D tilesets (ArcGIS, Cesium, etc.) that can be overlaid on the globe. Include a tileset manager UI, support for multiple tileset providers, and automatic aircraft positioning on top of the selected tileset.",
      "implements": [
        "REQ-F004"
      ],
      "component": "3D Tiles Streaming",
      "priority": "high",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-009"
      ],
      "deliverables": [
        "TilesetManager.cs script",
        "TilesetSelector UI component",
        "Support for ArcGIS 3D Tiles",
        "Support for Cesium ion tilesets",
        "Automatic aircraft positioning system",
        "Utrecht 3D tileset integration"
      ]
    },
    {
      "id": "IMPL-017",
      "title": "Add minimap with OpenStreetMap basemap",
      "description": "Successfully implemented a dynamic minimap overlay showing the aircraft's real-time position and heading on an OpenStreetMap basemap. Features:\n- OSMMapDisplay component: Reusable, north-oriented OSM tile renderer with (mapCenter, zoomLevel, pixelSize) parameters\n- MinimapController: HUD integration with rotation, RectMask2D clipping, and centered aircraft icon\n- Proper hierarchy: Minimap -> MapDisplay (OSMMapDisplay+RawImage) -> MinimapContainer (RectMask2D) -> AircraftIcon\n- Live updates: Aircraft position converted from Unity -> ECEF -> LLA coordinates every frame\n- Map rotation: Container rotates based on aircraft heading while aircraft icon stays upward\n- Tile fetching: 3x3 tile grid with smart boundary detection and auto-fetch\n- All references properly wired up and tested in play mode",
      "implements": [
        "REQ-F008"
      ],
      "component": "UI System",
      "priority": "medium",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-016"
      ],
      "deliverables": [
        "MinimapController.cs script",
        "OSM tile fetching system",
        "Real-time coordinate transformation (Unity → ECEF → LLA)",
        "Aircraft position and heading indicator",
        "Minimap UI canvas element",
        "Live update system (every frame)",
        "Tile boundary detection and auto-fetch"
      ]
    },
    {
      "id": "IMPL-018",
      "title": "Implement ballistic missile firing system",
      "description": "Successfully implemented a complete missile firing system with visual explosions and limited ammo. Features:\n- MissileLauncher.cs: Weapon system managing ammo (10 missiles), cooldown (1s), and missile spawning\n- Missile.cs: Ballistic projectile with raycast collision detection for Cesium buildings\n- ExplosionEffect.cs: Particle system controller with auto-cleanup\n- FlightInputHandler integration: Spacebar fires missiles\n- FlightHUD integration: Ammo display with color-coded status (green/yellow/red)\n- Missile.prefab: Cylinder mesh (scale 1,1,5) with Rigidbody for ballistic physics\n- Explosion.prefab: Particle system with visual effects\n- Raycast-based collision: Works with Cesium 3D Tiles that have no colliders\n- Ballistic physics: Initial velocity = aircraft velocity + 100 m/s forward thrust\n- Limited ammo system: 10 missiles, cannot fire when empty\n- One missile at a time: Previous missile must hit before next can fire\n- Auto-cleanup: Missiles destroy after 10s, explosions after 2s",
      "implements": [
        "REQ-F009"
      ],
      "component": "Weapons",
      "priority": "medium",
      "dependencies": [
        "IMPL-006",
        "IMPL-007",
        "IMPL-010"
      ],
      "deliverables": [
        "Assets/Scripts/Weapons/MissileLauncher.cs",
        "Assets/Scripts/Weapons/Missile.cs",
        "Assets/Scripts/Weapons/ExplosionEffect.cs",
        "Assets/Prefabs/Missile.prefab",
        "Assets/Prefabs/Explosion.prefab",
        "Updated FlightInputHandler.cs",
        "Updated FlightHUD.cs",
        "MISSILE_SETUP.md",
        "MissileLaunchSetup.cs editor script"
      ],
      "status": "completed",
      "progress": 100
    },
    {
      "id": "IMPL-019",
      "title": "Implement automated multi-platform build system",
      "description": "Create an automated build pipeline that produces distributable executables for Windows, Mac, and Linux platforms. The build system must be fully automatable and integrable with CI/CD pipelines (GitHub Actions, GitLab CI, etc.).\n\n## Build Targets:\n- **Windows**: x86_64 standalone build (.exe + data folder)\n- **macOS**: Universal binary (Intel + Apple Silicon) app bundle (.app)\n- **Linux**: x86_64 standalone build (executable + data folder)\n\n## Automation Requirements:\n- Builds triggered by git tags (e.g., v1.0.0) or manual workflow dispatch\n- No manual intervention required during build process\n- Cesium ion token configured via environment variable or secrets\n- Build artifacts automatically uploaded and versioned\n- All three platform builds complete in single pipeline run (parallel jobs)\n\n## Build Configuration:\n- Release mode (Development Build: OFF, Script Debugging: OFF)\n- Compression: LZ4 for faster load times\n- Quality settings optimized for each platform\n- Custom app icon and splash screen configured\n- Version number automatically from git tag\n\n## Distribution Artifacts:\n- **Windows**: FlightSim_Windows_v{VERSION}.zip (~200-400 MB)\n- **macOS**: FlightSim_Mac_v{VERSION}.dmg (~200-400 MB)\n- **Linux**: FlightSim_Linux_v{VERSION}.tar.gz (~200-400 MB)\n\n## CI/CD Pipeline Features:\n- GitHub Actions workflow with platform-specific runners:\n  - windows-latest runner for Windows build\n  - macos-latest runner for macOS build\n  - ubuntu-latest runner for Linux build\n- Unity License activation in CI environment\n- Parallel platform builds (3 jobs running simultaneously)\n- Artifact caching for faster subsequent builds\n- Automatic GitHub Release creation with all three artifacts\n- Build status badges in README\n- Optional: itch.io automatic deployment\n\n## Special Considerations - Cesium for Unity:\n- **Native compilation required**: Cesium uses a build hook (CompileCesiumForUnityNative.cs) that automatically compiles C++ native libraries during Unity build\n- **Platform-specific toolchains required on each runner**:\n  - Windows: CMake 3.18+, Visual Studio 2022, .NET SDK 6.0+\n  - macOS: CMake 3.18+, Xcode Command Line Tools, .NET SDK 6.0+\n  - Linux: CMake 3.18+, GCC/Clang C++20, .NET SDK 6.0+\n- **Cross-compilation NOT supported**: Each platform must be built on its native OS\n- **Build time**: First build takes 5-10 minutes per platform (native C++ compilation)\n- **Cesium ion access token** must be injected securely (not hardcoded)\n- Streaming assets included for offline Cesium cache\n\n## Testing Strategy:\n- Automated smoke tests post-build (can launch, basic functionality)\n- Manual QA checklist for each release\n- Test on clean machines without Unity installed",
      "implements": [
        "REQ-NF007"
      ],
      "component": "Build System",
      "priority": "high",
      "dependencies": [
        "IMPL-018"
      ],
      "deliverables": [
        "Build script (build.sh)",
        "GitHub Actions workflow (.github/workflows/build.yml)",
        "Unity build settings configuration",
        "Player settings with proper metadata",
        "README.txt with system requirements and controls",
        "Version management script",
        "CI/CD documentation",
        "Platform-specific packaging scripts (DMG for Mac, ZIP for Windows, tar.gz for Linux)"
      ],
      "status": "completed",
      "progress": 100
    },
    {
      "id": "IMPL-020",
      "title": "Implement main menu with ESC key toggle and pause functionality",
      "description": "Create a traditional game menu overlay system that can be toggled with the ESC key. The menu should pause the game (Time.timeScale = 0) and provide resume/exit functionality. Design should be extensible for future features like geocoding-based start location selection.\n\n## Current Status:\n**Code Complete** - Scripts and documentation written, Unity UI setup pending\n\n## Implementation Details:\n- **MainMenuController.cs**: Complete script with ESC key handling, pause/resume, cursor management\n- **FlightInputHandler.cs**: Updated to check menu state and block flight inputs when menu is active\n- **Documentation**: Complete setup guide in docs/MAIN_MENU_SETUP.md\n\n## Remaining Work:\n- Unity Editor UI hierarchy creation (Canvas → MenuPanel → Buttons)\n- Component configuration and reference wiring in Inspector\n- Testing in play mode\n\n## Menu Structure:\n```\nMainMenuCanvas (Canvas + MainMenuController)\n└── MenuPanel (Panel - semi-transparent overlay)\n    └── MenuContainer (Vertical Layout)\n        ├── MenuTitle (TextMeshPro - \"PAUSED\")\n        ├── ResumeButton (Button - \"START/RESUME\")\n        └── ExitButton (Button - \"EXIT\")\n```\n\n## Future Extensions Planned:\n- Settings panel (audio, graphics, controls)\n- Geocoding text field for start location selection\n- Save/Load functionality\n- Credits/About screen",
      "implements": [
        "REQ-F008"
      ],
      "component": "UI System",
      "priority": "medium",
      "status": "completed",
      "progress": 100,
      "dependencies": [
        "IMPL-010",
        "IMPL-007"
      ],
      "deliverables": [
        "Assets/Scripts/UI/MainMenuController.cs",
        "Updated FlightInputHandler.cs with menu state checking",
        "docs/MAIN_MENU_SETUP.md documentation",
        "MainMenuCanvas UI hierarchy (pending)",
        "Configured menu buttons with event handlers (pending)",
        "Tested pause/resume functionality (pending)"
      ]
    }
  ],
  "milestones": [
    {
      "id": "M1",
      "title": "PoC - Basic Flight & Terrain Complete",
      "phaseId": "PHASE-1",
      "status": "completed",
      "tasks": [
        "IMPL-001",
        "IMPL-002",
        "IMPL-003",
        "IMPL-004",
        "IMPL-005",
        "IMPL-006",
        "IMPL-007",
        "IMPL-008",
        "IMPL-009",
        "IMPL-010"
      ]
    },
    {
      "id": "M2",
      "title": "Flight Mechanics Complete",
      "phaseId": "PHASE-2",
      "status": "in-progress",
      "tasks": [
        "IMPL-011",
        "IMPL-012",
        "IMPL-013",
        "IMPL-014"
      ]
    },
    {
      "id": "M3",
      "title": "Dynamic Content Loading Complete",
      "phaseId": "PHASE-3",
      "status": "pending",
      "tasks": []
    },
    {
      "id": "M4",
      "title": "Game Features Complete",
      "phaseId": "PHASE-4",
      "status": "pending",
      "tasks": []
    },
    {
      "id": "M5",
      "title": "Polish & Release Ready",
      "phaseId": "PHASE-5",
      "status": "pending",
      "tasks": []
    }
  ]
}